(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{381:function(e,s,t){"use strict";t.r(s);var a=t(45),r=Object(a.a)({},(function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"blog-8"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#blog-8"}},[e._v("#")]),e._v(" Blog 8")]),e._v(" "),t("p",[e._v("In this blog I created a "),t("a",{attrs:{href:"https://www.serverless.com/framework/docs/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Serverless Framework"),t("OutboundLink")],1),e._v(" reference to help in the learning process for deploying serverless architecture to many cloud providers.")]),e._v(" "),t("h1",{attrs:{id:"context"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#context"}},[e._v("#")]),e._v(" Context")]),e._v(" "),t("p",[t("strong",[e._v("Documentation")]),e._v(": "),t("a",{attrs:{href:"https://www.serverless.com/framework/docs/",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://www.serverless.com/framework/docs/"),t("OutboundLink")],1)]),e._v(" "),t("p",[t("strong",[e._v("Functions")])]),e._v(" "),t("ul",[t("li",[e._v("Independent unit of deployment")]),e._v(" "),t("li",[e._v("Code written & deployed to the cloud")]),e._v(" "),t("li",[e._v("Performs a single job")]),e._v(" "),t("li",[e._v("e.g.\n"),t("ul",[t("li",[e._v("Saving user to database")]),e._v(" "),t("li",[e._v("Process file in database")]),e._v(" "),t("li",[e._v("Perform scheduled task")])])])]),e._v(" "),t("p",[t("strong",[e._v("Events")])]),e._v(" "),t("ul",[t("li",[e._v("Triggers "),t("strong",[e._v("functions")]),e._v(" from occurring")]),e._v(" "),t("li",[e._v("e.g.\n"),t("ul",[t("li",[e._v("Endpoint request")]),e._v(" "),t("li",[e._v("CRON trigger")]),e._v(" "),t("li",[e._v("On upload")])])])]),e._v(" "),t("p",[t("strong",[e._v("Resources")])]),e._v(" "),t("ul",[t("li",[e._v("Infrastructure "),t("strong",[e._v("components")]),e._v(" which "),t("strong",[e._v("functions")]),e._v(" use")]),e._v(" "),t("li",[e._v("e.g.\n"),t("ul",[t("li",[e._v("AWS S3 Bucket")]),e._v(" "),t("li",[e._v("AWS SNS")])])])]),e._v(" "),t("p",[t("strong",[e._v("Services")])]),e._v(" "),t("ul",[t("li",[e._v("Unit of organization")]),e._v(" "),t("li",[e._v("e.g. project file")]),e._v(" "),t("li",[e._v("Defines grouping of function, events, & resources")])]),e._v(" "),t("h1",{attrs:{id:"setup"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#setup"}},[e._v("#")]),e._v(" Setup")]),e._v(" "),t("ol",[t("li",[e._v("Install global serverless "),t("strong",[e._v("npm")]),e._v(" package")])]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("npm")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" -g serverless\n")])])]),t("ol",{attrs:{start:"2"}},[t("li",[e._v("Run setup command")])]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("serverless\n")])])]),t("p",[e._v("Extra: Upgrade package")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("npm")]),e._v(" update -g serverless\n")])])]),t("h1",{attrs:{id:"process"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#process"}},[e._v("#")]),e._v(" Process")]),e._v(" "),t("h2",{attrs:{id:"endpoint-set-up"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#endpoint-set-up"}},[e._v("#")]),e._v(" Endpoint Set-up")]),e._v(" "),t("p",[e._v("Define endpoint in "),t("code",[e._v("serverless.yml")]),e._v(" that will trigger your serverless function")]),e._v(" "),t("div",{staticClass:"language-yaml extra-class"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("functions")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("hello")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("handler")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" handler.hello\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Add the following lines:")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("events")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("http")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("path")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" hello\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("method")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" post\n")])])]),t("h2",{attrs:{id:"deploy-the-service"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#deploy-the-service"}},[e._v("#")]),e._v(" Deploy the Service")]),e._v(" "),t("p",[e._v("Deploy all changes within your service at the same time via "),t("strong",[e._v("CloudFormation")])]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("serverless deploy -v\n")])])]),t("ul",[t("li",[e._v("List of Options...")])]),e._v(" "),t("p",[e._v("Can be found in "),t("code",[e._v("sls deploy")]),e._v(" output")]),e._v(" "),t("h2",{attrs:{id:"test-the-service"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#test-the-service"}},[e._v("#")]),e._v(" Test the Service")]),e._v(" "),t("p",[t("strong",[e._v("Target URL Endpoint")])]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("curl")]),e._v(" -X POST https://TARGET_ENDPOINT.com/endpoint\n")])])]),t("p",[t("strong",[e._v("Invoke Service Function")])]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("serverless invoke -f FUNCTION_NAME -l\n")])])]),t("p",[t("strong",[e._v("Fetch Function Logs")])]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("serverless logs -f FUNCTION_NAME -t\n")])])]),t("h2",{attrs:{id:"removing-the-service"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#removing-the-service"}},[e._v("#")]),e._v(" Removing the Service")]),e._v(" "),t("p",[e._v("Removes functions, events, & resources created")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("serverless remove\n")])])]),t("hr"),e._v(" "),t("h1",{attrs:{id:"aws-specific-setup"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#aws-specific-setup"}},[e._v("#")]),e._v(" AWS Specific Setup")]),e._v(" "),t("h2",{attrs:{id:"credentials"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#credentials"}},[e._v("#")]),e._v(" Credentials")]),e._v(" "),t("ol",[t("li",[e._v("Create AWS account; "),t("em",[e._v("if needed")])]),e._v(" "),t("li",[e._v("Create "),t("strong",[e._v("IAM User")]),e._v(" & "),t("strong",[e._v("Access Key")]),e._v(" "),t("ul",[t("li",[e._v("Stored in environment variables")])])]),e._v(" "),t("li",[e._v("Configure IAM permissions")])]),e._v(" "),t("h2",{attrs:{id:"using-aws-access-keys"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#using-aws-access-keys"}},[e._v("#")]),e._v(" Using AWS Access Keys")]),e._v(" "),t("p",[t("strong",[e._v("Method 1 (Quick Setup)")])]),e._v(" "),t("p",[e._v("Exported as "),t("em",[e._v("environment variables")]),e._v(" to be accessible to "),t("em",[e._v("serverless")]),e._v(" & "),t("em",[e._v("AWS SDK")])]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("export")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("AWS_ACCESS_KEY_ID")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("your-key-here"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("export")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("AWS_SECRET_ACCESS_KEY")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("your-secret-key-here"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# AWS_ACCESS_KEY_ID and AWS_SECRET_ACCESS_KEY are now available for serverless to use")]),e._v("\nserverless deploy\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 'export' command is valid only for unix shells. In Windows - use 'set' instead of 'export'")]),e._v("\n")])])]),t("ul",[t("li",[e._v("Notes: If you are using a self-signed certificate you'll need to do one of the following...")])]),e._v(" "),t("p",[t("strong",[e._v("Method 2 (AWS Profiles)")]),e._v(" "),t("em",[e._v("Serverless Framework")]),e._v(" provides a way to configure AWS profiles using "),t("code",[e._v("serverless config credentials")])]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("serverless config credentials --provider aws --key AWS_ACCESS_ID --secret AWS_SECRET_KEY --profile test-profile-name\n")])])]),t("ul",[t("li",[e._v("List of Options...")])]),e._v(" "),t("h2",{attrs:{id:"create-new-service"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#create-new-service"}},[e._v("#")]),e._v(" Create New Service")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("serverless create --template aws-nodejs --path test-service\n")])])]),t("ul",[t("li",[e._v("List of Options...\n"),t("ul",[t("li",[t("code",[e._v("--template")]),e._v(" or "),t("code",[e._v("-t")]),e._v(" from an available template "),t("strong",[e._v("Required if none specified")])]),e._v(" "),t("li",[t("code",[e._v("--template-url")]),e._v(" Creates service using custom template ("),t("em",[e._v("URL")]),e._v(") "),t("strong",[e._v("Required if none specified")])]),e._v(" "),t("li",[t("code",[e._v("--path")]),e._v(" Creates service in new folder")]),e._v(" "),t("li",[t("code",[e._v("--name")]),e._v(" or "),t("code",[e._v("-n")]),e._v(" Names services under "),t("code",[e._v("serverless.yml")])])])])])])}),[],!1,null,null,null);s.default=r.exports}}]);